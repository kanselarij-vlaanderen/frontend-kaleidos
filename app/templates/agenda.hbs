{{page-title
  this.meetingKindPrefix
  " "
  this.model.agenda.agendaName
  " van "
  (moment-format
    this.model.meeting.plannedStart
    (if this.model.meeting.isPreKaleidos "DD-MM-YYYY" "DD-MM-YYYY HH:mm")
  )
}}
<Agenda::AgendaHeader
  @meeting={{this.model.meeting}}
  @currentAgenda={{this.model.agenda}}
  @reverseSortedAgendas={{this.model.reverseSortedAgendas}}
  @onStartLoading={{this.enableIsLoading}}
  @onStopLoading={{this.disableIsLoading}}
  @refreshRoute={{this.refresh}}
/>
{{#if this.isLoading}}
  {{! Page just goes blank when loading (only triggered on AgendaHeader actions and they provide a modal with loader)}}
  {{! The reason for this is that we want to prevent any clicking on sideNav or content in sibling routes during actions}}
{{else}}
  <div class="auk-panel-layout">
    {{#unless this.shouldHideNav}}
      <div class="auk-panel-layout__sidebar auk-panel-layout__agenda-history">
        <Agenda::SideNav
          @meeting={{this.model.meeting}}
          @currentAgenda={{this.model.agenda}}
          @reverseSortedAgendas={{this.model.reverseSortedAgendas}}
          @isOpen={{this.isOpenSideNav}}
          @onCollapse={{this.collapseSideNav}}
          @onOpen={{this.openSideNav}}
        />
      </div>
    {{/unless}}
    {{outlet}}
  </div>
{{/if}}