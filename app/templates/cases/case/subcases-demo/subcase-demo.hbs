{{#if this.model.shortTitle}}
  {{page-title this.model.shortTitle}}
{{else if this.model.title}}
  {{page-title this.model.title}}
{{else}}
  {{page-title (capitalize this.model.subcaseName)}}
{{/if}}

<Subcases::SubcasesOverviewHeader
  @decisionmakingFlow={{this.decisionmakingFlow}}
  @onCreateSubcase={{this.refreshSubcases}}
  @onSaveCase={{perform this.saveCase}}
  @currentRoute={{this.currentRoute}}
/>
<div class="auk-panel-layout">
  <div class="auk-panel-layout__sidebar auk-panel-layout__sidebar--cases">
    <Subcases::SideNav
      @isOpen={{this.isOpenSideNav}}
      @onCollapse={{this.collapseSideNav}}
      @onOpen={{this.openSideNav}}
    > 
      {{#if (or (eq this.impersonation.role.label 'Kabinetsdossierbeheerder')(eq this.currentSession.role.label 'Kabinetsdossierbeheerder'))}}
      <ul>

        {{#if this.model.decisionmakingFlow.subcases}}
          {{#each (reverse this.model.decisionmakingFlow.subcases) as |subcase index|}}
            {{#if (eq index 0)}}
            <li class="auk-sidebar__item auk-sidebar__item--styled auk-sidebar__item--inside-link">
              <LinkTo
                @route="cases.case.subcases-demo.subcase-demo.publication"
                @models={{array this.model.decisionmakingFlow.id subcase}}
              >
                <div class="auk-sidebar__label au-u-flex au-flex--vertical-center au-u-flex--spaced-tiny">
                  <strong>
                    Principiële goedkeuring
                  </strong>
                </div>
                <div class="auk-sidebar__sublabel au-u-margin-top-none">
                  Laatste wijziging op 23-12-2023 17:02
                </div>
                <div class="au-u-margin-top-tiny">
                  <AuPill @size="small" @skin="ongoing">Ingediend dossier</AuPill>
                </div>
              </LinkTo>
            </li>
            {{/if}}
          {{/each}}
          {{/if}}
      </ul>
      {{else}}
      <ul>

        {{#if this.model.decisionmakingFlow.subcases}}
          {{#each (reverse this.model.decisionmakingFlow.subcases) as |subcase index|}}
            {{#if (eq index 0)}}
            <li class="auk-sidebar__item auk-sidebar__item--styled auk-sidebar__item--inside-link">
              <LinkTo
                @route="cases.case.subcases-demo.subcase-demo.publication"
                @models={{array this.model.decisionmakingFlow.id subcase}}
              >
                <div class="auk-sidebar__label au-u-flex au-flex--vertical-center au-u-flex--spaced-tiny">
                  <strong>
                    Publicatie
                  </strong>
                </div>
                <div class="auk-sidebar__sublabel au-u-margin-top-none">
                  Laatste wijziging op 23-12-2023 17:02
                </div>
                <div class="au-u-margin-top-tiny">
                  <AuPill @size="small" @skin="warning">In vertaling</AuPill>
                </div>
              </LinkTo>
            </li>
            <li class="auk-sidebar__item auk-sidebar__item--styled auk-sidebar__item--inside-link">
              <LinkTo
                @route="cases.case.subcases-demo.subcase-demo.ratification"
                @models={{array this.model.decisionmakingFlow.id subcase}}
              >
                <div class="auk-sidebar__label au-u-flex au-flex--vertical-center au-u-flex--spaced-tiny">
                  <strong>
                    Bekrachtiging
                  </strong>
                </div>
                <div class="auk-sidebar__sublabel au-u-margin-top-none">
                  Laatste wijziging op 2-12-2023 17:02
                </div>
                <div class="au-u-margin-top-tiny">
                  <AuPill @size="small" @skin="warning">Nog geen beslissing ingesteld</AuPill>
                </div>
              </LinkTo>
            </li>
            <li class="auk-sidebar__item auk-sidebar__item--styled auk-sidebar__item--inside-link">
              <LinkTo
                @route="cases.case.subcases-demo.subcase-demo.vp"
                @models={{array this.model.decisionmakingFlow.id subcase}}
              >
                <div class="auk-sidebar__label au-u-flex au-flex--vertical-center au-u-flex--spaced-tiny">
                  <strong>
                    Vlaams Parlement
                  </strong>
                </div>
                <div class="auk-sidebar__sublabel au-u-margin-top-none">
                  Laatste wijziging op 03-09-2023 17:02
                </div>
                <div class="au-u-margin-top-tiny">
                  <AuPill @size="small" @skin="warning">Plenaire vergadering</AuPill>
                </div>
              </LinkTo>
            </li>
            <li class="auk-sidebar__item auk-sidebar__item--styled auk-sidebar__item--inside-link">
              <LinkTo
                @route="cases.case.subcases-demo.subcase-demo.final-approval"
                @models={{array this.model.decisionmakingFlow.id subcase}}
              >
                <div class="auk-sidebar__label au-u-flex au-flex--vertical-center au-u-flex--spaced-tiny">
                  <strong>
                    Definitieve goedkeuring
                  </strong>
                </div>
                <div class="auk-sidebar__sublabel au-u-margin-top-none">
                  Laatste wijziging op 28-08-2023 17:02
                </div>
                <div class="au-u-margin-top-tiny">
                  <AuPill @size="small" @skin="success">Goedgekeurd</AuPill>
                </div>
              </LinkTo>
            </li>
            <li class="auk-sidebar__item auk-sidebar__item--styled auk-sidebar__item--inside-link">
              <LinkTo
                @route="cases.case.subcases-demo.subcase-demo.second-approval"
                @models={{array this.model.decisionmakingFlow.id subcase}}
              >
                <div class="auk-sidebar__label au-u-flex au-flex--vertical-center au-u-flex--spaced-tiny">
                  <strong>
                    Principiële goedkeuring
                  </strong>
                </div>
                <div class="auk-sidebar__sublabel au-u-margin-top-none">
                  Laatste wijziging op 13-06-2023 17:02
                </div>
                <div class="au-u-margin-top-tiny">
                  <AuPill @size="small" @skin="success">Goedgekeurd</AuPill>
                </div>
              </LinkTo>
            </li>
            <li class="auk-sidebar__item auk-sidebar__item--styled auk-sidebar__item--inside-link">
              <LinkTo
                @route="cases.case.subcases-demo.subcase-demo.first-approval"
                @models={{array this.model.decisionmakingFlow.id subcase}}
              >
                <div class="auk-sidebar__label au-u-flex au-flex--vertical-center au-u-flex--spaced-tiny">
                  <strong>
                    Principiële goedkeuring
                  </strong>
                </div>
                <div class="auk-sidebar__sublabel au-u-margin-top-none">
                  Laatste wijziging op 01-04-2023 17:02
                </div>
                <div class="au-u-margin-top-tiny">
                  <AuPill @size="small" @skin="success">Goedgekeurd</AuPill>
                </div>
              </LinkTo>
            </li>
            {{/if}}
          {{/each}}
          {{/if}}
      </ul>
      {{/if}}
    </Subcases::SideNav>
  </div>
  <div class="auk-panel-layout__main-content">
    <AuBodyContainer>
      {{#if this.model.decisionmakingFlow.subcases}}
      <Subcases::SubcaseHeader
        @model={{this.model.decisionmakingFlow}}
        @subcase={{this.model}}
        @onMoveSubcase={{this.refreshSubcases}}
        @onProposedForAgenda={{this.refreshSubcases}}
        @currentRoute={{this.currentRoute}}
        @kabinet={{(or (eq this.impersonation.role.label 'Kabinetsdossierbeheerder')(eq this.currentSession.role.label 'Kabinetsdossierbeheerder'))}}
      />
      <AuBodyContainer @scroll={{true}}>
        <div class="auk-u-m-4 js-subcase-nav-observer">
          {{outlet}}
        </div>
      </AuBodyContainer>
      {{else}}
      <div class="auk-u-m-4">
        <Auk::EmptyState @message={{t "no-subcases"}} />
      </div>
      {{/if}}
    </AuBodyContainer>
  </div>
</div>