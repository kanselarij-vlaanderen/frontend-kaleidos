<Auk::CheckboxList {{did-update (perform this.calculateDomainSelections) @selectedFields}}
  data-test-domains-fields-selector-form>
  {{#each this.domainSelections as |domainSelection index|}}
    {{!-- template-lint-disable simple-unless --}}
    {{#unless (eq index 0)}}
      <hr class="auk-u-my-2">
    {{/unless}}
    {{!-- template-lint-enable simple-unless --}}
    <Auk::Checkbox
      @checked={{domainSelection.isSelected}}
      {{on "input" (fn this.toggleDomainSelection domainSelection)}}>
      {{domainSelection.domain.label}}
      <Auk::CheckboxList class="auk-u-mt">
        {{#each domainSelection.availableFields as |field|}}
          <Auk::Checkbox
            @checked={{includes field domainSelection.selectedFields}}
            @label={{field.label}}
            {{on "input" (fn this.toggleFieldSelection field)}}
            data-test-domains-fields-selector-form-field />
        {{/each}}
      </Auk::CheckboxList>
    </Auk::Checkbox>
  {{/each}}
</Auk::CheckboxList>