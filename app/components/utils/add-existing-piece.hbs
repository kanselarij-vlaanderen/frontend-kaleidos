{{!-- TODO: octane-refactor --}}
{{!-- template-lint-disable no-action --}}
<div class="auk-u-mb-2">
  <Auk::Toolbar @auto={{true}}>
    <Auk::Toolbar::Group @position="left">
      <Auk::Toolbar::Item class="auk-u-maximize-width auk-u-overflow-hidden">
        <AuInput
          data-test-add-existing-piece-search-input={{true}}
          @icon="search"
          @width="block"
          @value={{this.filter}}
          {{on "input" (perform this.searchTask)}}
          id="searchId"
          placeholder={{t "search-placeholder"}}
        />
      </Auk::Toolbar::Item>
    </Auk::Toolbar::Group>
  </Auk::Toolbar>
  <div>
    {{#if this.searchTask.isRunning}}
      <div class="auk-o-flex auk-o-flex--center auk-u-mt-4">
        <Auk::Loader @message={{t "loading"}} />
      </div>
    {{else}}
      <DataTable
        @content={{this.pieces}}
        @sort={{this.sort}}
        @page={{this.pageParam}}
        @size={{this.size}}
        @noDataMessage={{t "no-results-found"}}
        @isLoading={{this.findAll.isRunning}}
        @onClickRow={{action "select"}}
      as |table|>
        <table.content as |c|>
          <c.header>
            <th></th>
            <th><span class="">{{t "title-document"}}</span></th>
            <th><span class="">{{t "created-on"}}</span></th>
          </c.header>
          <c.body as |row|>
            <td class="auk-table__col--1">
              <AuControlCheckbox
                data-test-add-existing-piece-checkbox={{true}}
                @checked={{row.selected}}
                @onChange={{fn this.select row}}
              />
            </td>
            <td class="auk-table__col--8">
              {{row.name}}
            </td>
            <td class="auk-table__col--3">
              {{#if row.created}}
                {{date-format row.created "EEEEEE dd-MM-yyyy HH:mm"}}
              {{else}}
                {{t "dash"}}
              {{/if}}
            </td>
          </c.body>
        </table.content>
      </DataTable>
    {{/if}}
  </div>
</div>