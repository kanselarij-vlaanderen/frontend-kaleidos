<Auk::Modal @size="large">
  <Auk::Modal::Header
    @title={{if this.isNew (t "new-agenda") (t "edit-meeting")}}
    @onClose={{@onCancel}}
  />
  <Auk::Modal::Body>
    <Utils::KindSelector
      @onChange={{this.selectKind}}
      @selectedKind={{this.selectedKind}}
      @isLoading={{this.initializeKind.isRunning}}
    />
    {{#if this.isAnnexMeeting}}
      <div class="auk-u-mb-2">
        <div class="auk-form-group">
          <Auk::Label>
            {{t "related-main-meeting-field-label"}}
          </Auk::Label>
          <Utils::ModelSelector
            data-test-edit-meeting-related-main-meeting
            @modelName="meeting"
            @searchField="number-representation"
            @sortField="-planned-start"
            @selected={{this.selectedMainMeeting}}
            @onChange={{this.selectMainMeeting}}
            @filterOptions={{fn this.filterMainMeetingResults @meeting}}
            @isLoading={{this.initializeMainMeeting.isRunning}}
            as |model|
          >
            {{kind-print-label model.kind}}
            {{t "of"}}
            {{moment-format model.plannedStart}}
            ({{model.numberRepresentation}})
          </Utils::ModelSelector>
        </div>
      </div>
    {{else}}
      <div class="auk-u-mb-2">
        <div class="auk-form-group" data-test-edit-meeting-datepicker>
          <Auk::Label>{{t "start-date"}}</Auk::Label>
          <Auk::Datepicker
            @enableTime={{true}}
            @date={{this.startDate}}
            @onChange={{this.setStartDate}}
          />
        </div>
      </div>
    {{/if}}
    {{!Publicatiedatum}}
    <div class="auk-u-mb-2">
      <div data-test-edit-meeting-document-publication-date class="auk-form-group">
        <Auk::Label>
          {{t "date-publication-documents"}}
        </Auk::Label>
        <Auk::Datepicker
          @enableTime={{true}}
          @date={{this.plannedDocumentPublicationDate}}
          @onChange={{set this "plannedDocumentPublicationDate"}}
          @disabled={{this.isDisabledPlannedDocumentPublicationDate}}
        />
        <Auk::FormHelpText
          class="auk-u-mt"
          @icon="circle-info"
          @text={{t "agenda-publication--publication-date--help"}}
        />
      </div>
    </div>
    <div class="auk-u-mb-2">
      <div class="auk-form-group">
        <Auk::Label>
          {{t "meeting-number"}}
        </Auk::Label>
        <div class="auk-o-flex">
          {{#unless this.isAnnexMeeting}}
            <Auk::Input
              data-test-edit-meeting-meeting-number
              @type="number"
              @value={{this.meetingNumber}}
              id="meetingNumberInput"
              disabled={{this.initializeMeetingNumber.isRunning}}
              @width="medium"
              class="auk-u-mr-2"
            />
          {{/unless}}
          <div class="auk-o-flex__item">
            <div
              data-test-edit-meeting-number-representation-view
              class="auk-u-text-line-height--xsmall"
            >
              {{this.numberRepresentation}}
            </div>
            <Auk::ButtonLink
              data-test-edit-meeting-number-representation-edit
              disabled={{this.initializeMeetingNumber.isRunning}}
              {{on "click" this.toggleEditingNumberRepresentation}}
            >
              <small>{{t "edit"}}</small>
            </Auk::ButtonLink>
          </div>
        </div>
      </div>
      {{#if this.isEditingNumberRepresentation}}
        <div class="auk-o-flex">
          <Auk::Input
            @width="medium"
            @value={{this.numberRepresentation}}
            class="auk-u-mr-2"
            data-test-edit-meeting-number-representation-input
          />
          <Auk::Button
            @skin="primary"
            {{on "click" this.toggleEditingNumberRepresentation}}
            data-test-edit-meeting-number-representation-save
          >
            {{t "save"}}
          </Auk::Button>
        </div>
      {{/if}}
    </div>
    {{#unless this.isAnnexMeeting}}
      <div class="auk-u-mb-2">
        <div class="auk-form-group">
          <Auk::Label>
            {{t "meeting-location"}}
          </Auk::Label>
          <Auk::Input
            @block={{true}}
            @value={{this.extraInfo}}
            data-test-edit-meeting-meeting-location
          />
        </div>
      </div>
    {{/unless}}
  </Auk::Modal::Body>
  <Auk::Modal::Footer @onCancel={{@onCancel}}>
    <Auk::Button
      @skin="primary"
      {{on "click" (perform this.saveMeeting)}}
      disabled={{this.savingIsDisabled}}
      data-test-edit-meeting-save
    >
      {{#if this.isNew}}
        {{t "add"}}
      {{else}}
        {{t "edit"}}
      {{/if}}
    </Auk::Button>
  </Auk::Modal::Footer>
</Auk::Modal>