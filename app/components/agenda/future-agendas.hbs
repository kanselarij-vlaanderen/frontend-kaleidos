<h2 class="auk-h3">
  {{this.title}}
</h2>
{{#if (not (is-pending this.hasActiveAgendas))}}
  {{#if (await this.hasActiveAgendas)}}
    <table class="data-table auk-table auk-table--striped"
           data-test-future-agenda-table>
      <thead>
        <tr>
          <th class="auk-table__col--3 auk-table__header-title auk-table__header-title--unsortable">
            <div class="auk-o-flex auk-o-flex--vertical-center">
              <span>
                {{t "agenda"}}
              </span>
            </div>
          </th>
          <th class="auk-table__col--2 auk-table__header-title auk-table__header-title--unsortable"
          >
            <div class="auk-o-flex auk-o-flex--vertical-center">
              <span>
                {{t "agenda-version"}}
              </span>
            </div>
          </th>
          <th class="auk-table__col--2 auk-table__header-title auk-table__header-title--unsortable"
          >
            <div class="auk-o-flex auk-o-flex--vertical-center">
              <span>
                {{t "latest-modified"}}
              </span>
            </div>
          </th>
          <th class="auk-table__col--2 auk-table__header-title auk-table__header-title--unsortable"
          >
            <div class="auk-o-flex auk-o-flex--vertical-center">
              <span>
                {{t "status"}}
              </span>
            </div>
          </th>
          <th class="auk-table__col--2 auk-table__header-title auk-table__header-title--unsortable"
          >
            <div class="auk-o-flex auk-o-flex--vertical-center">
              <span>
                {{t "kind"}}
              </span>
            </div>
          </th>
          <th class="auk-table__col--1"></th>
        </tr>
      </thead>
      <tbody class="auk-table--interaction-cursor" data-test-future-agenda-table-body>
        {{#each (await this.items) as |meeting|}}
          {{!-- Users explicitly want the whole row and not just the arrow at the end to be clickable and link through --}}
          {{!-- template-lint-disable no-unknown-arguments-for-builtin-components --}}
          <LinkTo
            @route="agenda.agendaitems"
            @models={{array meeting.id meeting.latestAgenda.id}}
            @tagName="tr"
          >
          {{!-- template-lint-enable no-unknown-arguments-for-builtin-components --}}
            <td>
              {{#if (is-pending meeting)}}
                <div class="auk-skeleton auk-skeleton--rectangle" role="alert" aria-busy="true"></div>
              {{else}}
                {{t "agenda-for"}}
                {{moment-format meeting.plannedStart "DD.MM.YYYY"}}
              {{/if}}
            </td>
            <td>
              {{#if (is-pending meeting.latestAgendaName)}}
                <div class="auk-skeleton auk-skeleton--rectangle" role="alert" aria-busy="true"></div>
              {{else if (await meeting.latestAgendaName)}}
                {{await meeting.latestAgendaName}}
              {{else}}
                {{t "no-agenda"}}
              {{/if}}
            </td>
            <td>
              {{#if (is-pending meeting.latestAgenda)}}
                <div class="auk-skeleton auk-skeleton--rectangle" role="alert" aria-busy="true"></div>
              {{else}}
                {{moment-format
                  (await meeting.latestAgenda.modified)
                  "DD-MM-YYYY HH:mm"
                }}
              {{/if}}
            </td>
            <td>
              {{#if meeting.isFinal}}
                {{t "closed"}}
              {{else}}
                {{t "opened"}}
              {{/if}}
            </td>
            <td>
              {{meeting.kindToShow.label}}
            </td>
            <td class="auk-u-text-align--center">
              <Auk::Button
                @skin="borderless"
                @layout="icon-only"
                @icon="chevron-right"
                @route="agenda.agendaitems"
                @models={{array meeting.id meeting.latestAgenda.id}}
                @bubbles={{false}}
              />
            </td>
          </LinkTo>
        {{/each}}
      </tbody>
    </table>
  {{else}}
    <div>
      <WebComponents::VlAlert @message={{this.emptyText}} />
    </div>
  {{/if}}
{{else}}
  <WebComponents::VlLoader @text={{concat (t "loading-active-agendas") " " (t "please-be-patient")}} />
{{/if}}