<AuFormRow ...attributes>
  <AuLabel @required={{true}} @inline={{true}}>{{capitalize (t "case")}}</AuLabel>
  <div class="au-c-inline-input-button">
    {{#if @selectedDecisionmakingFlow}}
      <AuInput
        value={{@selectedDecisionmakingFlow.case.shortTitle}}
        @disabled={{true}}
      />
      {{#unless @disableEdit}}
        <AuButton
          @skin="secondary"
          @icon="pencil"
          {{on "click" (queue this.onClearSelectedDecisionmakingFlow this.setFocus)}}
        >
          {{t "new-case"}}
        </AuButton>
        <AuButton
          @skin="secondary"
          @icon="add"
          {{on "click" (queue (toggle "isUsingExistingDecisionmakingFlow" this) this.setFocus)}}
        >
          {{t "use-an-existing-case"}}
        </AuButton>
      {{/unless}}
    {{else}}
      <AuInput
        id="newCaseTitleId"
        value={{@selectedDecisionmakingFlowTitle}}
        {{on "input" (pick "target.value" this.onChangeDecisionmakingFlowTitle)}}
      />
      <AuButton
        @skin="secondary"
        @icon="add"
        {{on "click" (queue (toggle "isUsingExistingDecisionmakingFlow" this) this.setFocus)}}
      >
        {{t "use-an-existing-case"}}
      </AuButton>
    {{/if}}
  </div>
</AuFormRow>

<ConfirmationModal
  @modalOpen={{this.isUsingExistingDecisionmakingFlow}}
  @title={{t "use-existing-case"}}
  @onConfirm={{this.onConfirmDecisionmakingFlow}}
  @onCancel={{this.onCancelDecisionmakingFlow}}
  @confirmMessage={{t "use-case"}}
>
  <:body>
    <div>
      <AuLabel>{{t "select-case"}}</AuLabel>
      <PowerSelect
        @search={{perform this.searchDecisionmakingFlows}}
        @searchMessage={{t "search-on-case-name"}}
        @searchEnabled={{true}}
        @noMatchesMessage={{t "no-results-found"}}
        @loadingMessage={{t "please-be-patient"}}
        @selected={{this.selectedDecisionmakingFlow}}
        @onChange={{this.onSelectDecisionmakingFlow}}
        class="au-u-1-1"
        as |decisionmakingFlow|
      >
        {{decisionmakingFlow.case.shortTitle}}
      </PowerSelect>
    </div>
  </:body>
</ConfirmationModal>
