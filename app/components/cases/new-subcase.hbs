<Auk::Modal>
  <Auk::Modal::Header @title={{t "create-subcase"}} @onClose={{@onClose}} />
  <Auk::Modal::Body>
    <Utils::LoadableContent
      @isLoading={{this.areLoadingTasksRunning}}
      @reserveSpace={{true}}
    >
      <div class="auk-o-flex auk-o-flex--justify-between">
        <div class="auk-u-mb-4">
          <fieldset>
            <legend class="auk-label">{{t "subcase-type"}}</legend>
            <Auk::RadioList
              @layout="inline"
              data-test-new-subcase-type
              as |List|
            >
              {{#each this.agendaItemTypes as |type|}}
                <List.Radio
                  @label={{type.label}}
                  @checked={{eq this.agendaItemType.id type.id}}
                  value={{type.id}}
                  {{on "change" this.selectAgendaItemType}}
                />
              {{/each}}
            </Auk::RadioList>
          </fieldset>
        </div>

        <div class="auk-o-flex auk-o-flex--vertical-center">
          <Auk::Toolbar>
            <Auk::Toolbar::Group @position="right">
              <Auk::Toolbar::Item>
                <Auk::Button
                  @skin="secondary"
                  @icon="copy-paste"
                  {{on "click" (perform this.copyFullSubcase)}}
                  data-test-new-subcase-clone-previous-subcase
                >
                  {{t "clone-previous-subcase"}}
                </Auk::Button>
              </Auk::Toolbar::Item>
            </Auk::Toolbar::Group>
          </Auk::Toolbar>
        </div>
      </div>
      <div class="auk-form-group">
        <Auk::Label for="new-subcase-confidential">{{t "confidential"}}</Auk::Label>
        <Auk::Toggle
          data-test-new-subcase-confidential
          id="new-subcase-confidential"
          @checked={{this.confidential}}
        />
      </div>
      <div class="auk-form-group">
        <Auk::Label>{{t "name-subcase"}}</Auk::Label>
        <Auk::Textarea
          data-test-new-subcase-shorttitle
          @rows="2"
          @value={{this.shortTitle}}
        />
      </div>
      <div class="auk-form-group">
        <Auk::Label>{{t "title-subcase"}}</Auk::Label>
        <Auk::Textarea
          data-test-new-subcase-longtitle
          @rows="4"
          @value={{this.title}}
        />
      </div>
      <div class="auk-form-group">
        <Auk::Label>{{t "subcase-type-dropdown"}}</Auk::Label>
        <Utils::ModelSelector
          data-test-new-subcase-procedure-step
          @modelName="subcase-type"
          @searchField="label"
          @sortField="label"
          @selected={{this.type}}
          @onChange={{this.selectType}}
        as |model|>
          {{capitalize model.label}}
        </Utils::ModelSelector>
      </div>
      <div class="auk-form-group">
        <Auk::Label>{{t "subcase-name"}}</Auk::Label>
        <div class="auk-o-flex auk-o-flex--vertical-center">
          {{#if (not this.isEditing)}}
            <Utils::ModelSelector
              data-test-new-subcase-procedure-name
              class="auk-u-maximize-width"
              @modelName="shortcut"
              @searchField="label"
              @sortField="label"
              @filter={{this.filter}}
              @selected={{this.selectedShortcut}}
              @onChange={{this.selectSubcaseName}}
            as |model|>
              {{capitalize model.label}}
            </Utils::ModelSelector>
            <Auk::Button
              @skin="secondary"
              @layout="icon-only"
              @icon="pencil"
              {{on "click" this.toggleIsEditing}}
            >
              {{t "edit"}}
            </Auk::Button>
          {{else}}
            <Auk::Input
              @block={{true}}
              @value={{this.subcaseName}}
              id="subcaseNameId"
            />
            <Auk::Button
              @skin="secondary"
              @layout="icon-only"
              @icon="x"
              {{on "click" this.toggleIsEditing}}
            >
              {{t "cancel"}}
            </Auk::Button>
          {{/if}}
        </div>
      </div>
    </Utils::LoadableContent>
  </Auk::Modal::Body>
  <Auk::Modal::Footer
    @cancelDisabled={{this.saveSubcase.isRunning}}
    @onCancel={{@onClose}}
  >
    <Auk::Button
      data-test-new-subcase-save
      @skin="primary"
      @disabled={{this.areSavingTasksRunning}}
      @loading={{or this.areSavingTasksRunning this.areLoadingTasksRunning}}
      {{on "click" (perform this.saveSubcase)}}
    >
      {{t "new-subcase"}}
    </Auk::Button>
  </Auk::Modal::Footer>
</Auk::Modal>