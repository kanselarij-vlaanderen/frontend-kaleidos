<Auk::Modal>
  <Auk::Modal::Header
    @title={{t "create-subcase"}}
    @onClose={{@onClose}}
  />
  <Auk::Modal::Body>
    <Utils::LoadableContent @isLoading={{or this.loadCaseTypes.isRunning this.loadTitleData.isRunning}} @reserveSpace={{true}}>
      <div class="auk-o-flex auk-o-flex--justify-between">

        <WebComponents::VlRadioButtonList
          @title={{t "subcase-type"}}
          @optionList={{this.caseTypes}}
          @modelChanged={{this.typeChanged}}
        />

        <div class="auk-o-flex auk-o-flex--vertical-center">
          <Auk::Toolbar>
            <Auk::Toolbar::Group @position="right">
              <Auk::Toolbar::Item>
                <Auk::Button
                  @skin="secondary"
                  @icon="copy-paste"
                  {{on "click" (perform this.copyFullSubcase)}}
                  data-test-new-subcase-clone-previous-subcase
                >
                  {{t "clone-previous-subcase"}}
                </Auk::Button>
              </Auk::Toolbar::Item>
            </Auk::Toolbar::Group>
          </Auk::Toolbar>
        </div>
      </div>
      <div class="auk-form-group">
        <Auk::Label>{{t "name-subcase"}}</Auk::Label>
        <Auk::Textarea @rows="2" @value={{this.shortTitle}} />
      </div>
      <div class="auk-form-group">
        <Auk::Label>{{t "title-subcase"}}</Auk::Label>
        <Auk::Textarea @rows="4" @value={{this.title}} />
      </div>
      <div class="auk-form-group">
        <Auk::Label>{{t "subcase-type-dropdown"}}</Auk::Label>
        <Utils::ModelSelector
          @modelName="subcase-type"
          @searchField="label"
          @propertyToShow="label"
          @sortField="label"
          @selectedItems={{this.type}}
          @selectModel={{this.selectType}}
        />
      </div>
      <div class="auk-form-group">
        <Auk::Label>{{t "subcase-name"}}</Auk::Label>
        <div class="auk-o-flex auk-o-flex--vertical-center">
          {{#if (not this.isEditing)}}
            <Utils::ModelSelector
              class="vlc-u-box-model-maximize-width"
              @modelName="shortcut"
              @searchField="label"
              @propertyToShow="label"
              @sortField="label"
              @filter={{this.filter}}
              @selectedItems={{this.selectedShortcut}}
              @selectModel={{this.selectSubcaseName}}
            />
            <Auk::Button
              @skin="secondary"
              @layout="icon-only"
              @icon="pencil"
              {{on "click" this.toggleIsEditing}}
            >
              {{t "edit"}}
            </Auk::Button>
          {{else}}
            <Auk::Input
              @type="text"
              @block={{true}}
              @value={{this.subcaseName}}
              id="subcaseNameId"
            />
            <Auk::Button
              @skin="secondary"
              @layout="icon-only"
              @icon="cross"
              {{on "click" this.toggleIsEditing}}
            >
              {{t "cancel"}}
            </Auk::Button>
          {{/if}}
        </div>
      </div>
    </Utils::LoadableContent>
  </Auk::Modal::Body>
  <Auk::Modal::Footer
    @cancelDisabled={{this.save.isRunning}}
    @onCancel={{@onClose}}>
    <Auk::Button
      @skin="primary"
      @disabled={{this.save.isRunning}}
      @loading={{or this.saveSubcase.isRunning this.copyFullSubcase.isRunning}}
      {{on "click" (perform this.saveSubcase)}}>
      {{t "new-subcase"}}
    </Auk::Button>
  </Auk::Modal::Footer>
</Auk::Modal>
