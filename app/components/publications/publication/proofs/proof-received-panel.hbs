<Auk::Panel data-test-proof-received-panel>
  <Auk::Panel::Header @size="large">
    <Auk::Toolbar>
      <Auk::Toolbar::Group @position="left">
        <Auk::Toolbar::Item>
          <h4 class="auk-panel__title">
            {{t "received-proof"}}
          </h4>
          <p data-test-proof-received-panel-end-date class="auk-u-text-small auk-u-m-0">
            {{moment-format @proofingActivity.endDate "DD.MM.YYYY"}}
          </p>
        </Auk::Toolbar::Item>
      </Auk::Toolbar::Group>
      <Auk::Toolbar::Group @position="right">
        <Auk::DropdownMenu
          data-test-proof-received-panel-dropdown
          @skin="borderless"
          @icon="three-dots"
          as |Menu|
        >
          <Menu.Item
            @skin="primary"
            @disabled={{@isCreatePublicationRequestDisabled}}
            {{on "click" this.openPublicationRequestModal}}
          >
            {{t "request-publication"}}
          </Menu.Item>
          <Menu.Item
            data-test-proof-received-panel-edit
            @skin="primary" {{on "click" this.openEditProofModal}}
          >
            {{t "edit-2"}}
          </Menu.Item>
        </Auk::DropdownMenu>
      </Auk::Toolbar::Group>
    </Auk::Toolbar>
  </Auk::Panel::Header>

  <Auk::Panel::Body>
    <Publications::Publication::PublicationDocumentsList
      @pieces={{@proofingActivity.generatedPieces}}
      @viewable={{true}}
    />
  </Auk::Panel::Body>
</Auk::Panel>

{{#if this.showPublicationRequestModal}}
  <Publications::Publication::PublicationActivities::PublicationRequestModal
    @publicationFlow={{@publicationFlow}}
    @proofingActivity={{@proofingActivity}}
    @onSave={{perform this.createPublicationRequest}}
    @onCancel={{this.closePublicationRequestModal}}
  />
{{/if}}

{{#if this.showEditProofModal}}
  <Auk::Modal>
    <Auk::Modal::Header
      @title={{t "edit-proof"}}
      @onClose={{this.closeEditProofModal}}
    />
    <Auk::Modal::Body>
      <div class="auk-form-group">
        <Auk::Label for="proofUploadReceivedDate" @required={{true}}>
          {{t "date"}}
        </Auk::Label>
        <Auk::Datepicker
          id="proofUploadReceivedDate"
          @date={{this.newReceivedDate}}
          @onChange={{this.setNewReceivedDate}}
        />
      </div>
      <div class="auk-form-group">
        <Auk::Label for="proofPrintCorrector">
          {{t "who-proof-reads"}}
        </Auk::Label>
        <Auk::Input
          data-test-proof-received-panel-edit-corrector
          id="proofPrintCorrector"
          @value={{mut this.newProofPrintCorrector}}
        />
      </div>
    </Auk::Modal::Body>
    <Auk::Modal::Footer
      @cancelDisabled={{this.isCancelDisabled}}
      @onCancel={{this.closeEditProofModal}}
    >
      <Auk::Button
        data-test-proof-received-panel-edit-save
        @skin="primary"
        @disabled={{this.isSaveDisabled}}
        @loading={{this.save.isRunning}}
        {{on "click" (perform this.save)}}
      >
        {{t "save"}}
      </Auk::Button>
    </Auk::Modal::Footer>
  </Auk::Modal>
{{/if}}