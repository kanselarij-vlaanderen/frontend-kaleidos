<Auk::Panel>
  <Auk::Panel::Header @size="large">
    <Auk::Toolbar as |Toolbar|>
      <Toolbar.Group as |Group|>
        <Group.Item>
          <h4 class="auk-panel__title auk-panel__title--small">
            {{t "registered-publication"}}
          </h4>
          <span class="auk-u-text-small auk-u-m-0">
            {{moment-format this.latestDecision.publicationDate}}
          </span>
        </Group.Item>
      </Toolbar.Group>
      <Toolbar.Group @position="right">
        <DropdownMenu
          @skin="borderless"
          @icon="three-dots"
          @disabled={{and this.loadData.isIdle this.isEditDisabled}}
          as |Menu|
        >
          {{!avoid render issues}}
          {{#if this.loadData.isIdle}}
            <Menu.Item
              @disabled={{this.isEditDisabled}}
              {{on "click" this.openPublicationEditModal}}
            >
              {{t "edit-2"}}
            </Menu.Item>
          {{/if}}
        </DropdownMenu>
      </Toolbar.Group>
    </Auk::Toolbar>
  </Auk::Panel::Header>
  <Auk::Panel::Body>
    <Auk::List>
      {{#each this.decisions as |decision|}}
        <div class="auk-o-flex auk-o-flex--spaced-wide">
          <Auk::List::Item class="auk-o-flex auk-o-flex--spaced-wide">
            <div class="auk-o-flex auk-o-flex--spaced">
              <Auk::Badge @icon="document" @size="regular" />
              {{#if decision.title}}
                <h5 class="auk-h4 auk-u-m-0">{{decision.title}}</h5>
              {{/if}}
              <div class="auk-u-text-muted auk-u-italic">
                {{moment-format decision.publicationDate "DD-MM-YYYY"}}
              </div>
            </div>
            {{#if decision.isStaatsbladResource}}
              <Auk::ButtonLink
                @href={{decision.uri}}
                @layout="icon-only"
                @icon="external-link"
                @target="_blank"
              />
            {{/if}}
          </Auk::List::Item>
        </div>
      {{/each}}
    </Auk::List>
  </Auk::Panel::Body>
</Auk::Panel>

{{#if this.isOpenPublicationEditModal}}
  <Publications::Publication::PublicationActivities::PublicationEditModal
    @publicationDate={{this.latestDecision.publicationDate}}
    @onSave={{perform this.editPublication}}
    @onCancel={{this.closePublicationEditModal}}
  />
{{/if}}