{{! Although not recommended for accessibility-reasons, users explicitly
request the whole row and not only the arrow at the end to be clickable }}
{{! template-lint-disable no-invalid-interactive }}
<tr
  data-test-publication-table-row
  class="auk-table--clickable-rows"
  {{on "click" (fn this.navigateToPublication @publicationFlow)}}
>
  {{! template-lint-enable no-invalid-interactive }}
  {{#if @tableColumnDisplayOptions.isUrgent}}
    <td
      data-test-publication-table-row-is-urgent
      class="auk-u-text-align--center"
    >
      {{#if @publicationFlow.urgencyLevel.isUrgent}}
        <Auk::Icon @skin="warning" @name="alert-triangle" />
      {{else}}
        {{t "dash"}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.publicationNumber}}
    <td data-test-publication-table-row-publication-number>
      {{#if @publicationFlow.identification.idName}}
        {{@publicationFlow.identification.idName}}
      {{else}}
        {{t "dash"}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.numacNumber}}
    <td data-test-publication-table-row-numac-number>
      {{#if @publicationFlow.numacNumbers.length}}
        {{join ", " (map-by "idName" @publicationFlow.numacNumbers)}}
      {{else}}
        {{t "dash"}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.shortTitle}}
    <td data-test-publication-table-row-short-title class="auk-table__col--6">
      <Auk::AbbreviatedText
        @text={{@publicationFlow.shortTitle}}
        @maxLength={{150}}
        as |text|
      >
        <div class="auk-o-flex__item">
          {{text}}
        </div>
      </Auk::AbbreviatedText>
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.remark}}
    <td data-test-publication-table-row-remark class="auk-u-text-align--center">
      {{#if @publicationFlow.remark}}
        <Auk::Icon @skin="muted" @name="comment" />
        <EmberTooltip @tooltipClass="auk-tooltip" @side="left">
          <p data-test-publication-table-row-remark-tooltip>
            {{@publicationFlow.remark}}
          </p>
        </EmberTooltip>
      {{else}}
        {{t "dash"}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.numberOfPages}}
    <td data-test-publication-table-row-number-of-pages>
      {{#if (not (is-empty @publicationFlow.numberOfPages))}}
        {{@publicationFlow.numberOfPages}}
      {{else}}
        {{t "dash"}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.decisionDate}}
    <td data-test-publication-table-row-decision-date class="auk-u-text-nowrap">
      {{#if @publicationFlow.agendaItemTreatment.startDate}}
        {{moment-format
          @publicationFlow.agendaItemTreatment.startDate
          "DD-MM-YYYY"
        }}
      {{else}}
        {{t "dash"}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.openingDate}}
    <td data-test-publication-table-row-opening-date class="auk-u-text-nowrap">
      {{#if @publicationFlow.openingDate}}
        {{moment-format @publicationFlow.openingDate "DD-MM-YYYY"}}
      {{else}}
        {{t "dash"}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.translationRequestDate}}
    <td
      data-test-publication-table-row-translation-request-date
      class="auk-u-text-nowrap"
    >
      {{#if this.translationRequestDate}}
        {{moment-format
          this.translationRequestDate
          "DD-MM-YYYY"
        }}
      {{else}}
        {{t "dash"}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.translationDueDate}}
    <td
      data-test-publication-table-row-translation-due-date
      class="auk-u-text-nowrap"
    >
      {{#if @publicationFlow.translationSubcase.dueDate}}
        <div class="{{if this.isTranslationOverdue 'auk-u-text-bold'}}">
          {{moment-format
            @publicationFlow.translationSubcase.dueDate
            "DD-MM-YYYY"
          }}
        </div>
        {{#if this.isTranslationOverdue}}
          <Auk::FormHelpText
            @text={{t "date-expired"}}
            @skin="warning"
            @icon="alert-triangle"
          />
        {{/if}}
      {{else}}
        {{t "dash"}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.proofRequestDate}}
    <td
      data-test-publication-table-row-proof-request-date
      class="auk-u-text-nowrap"
    >
      {{#if this.proofRequestDate}}
        {{moment-format this.proofRequestDate "DD-MM-YYYY"}}
      {{else}}
        {{t "dash"}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.proofReceivedDate}}
    <td
      data-test-publication-table-row-proof-received-date
      class="auk-u-text-nowrap"
    >
      {{#if this.proofReceivedDate}}
        {{moment-format
          this.proofReceivedDate
          "DD-MM-YYYY"
        }}
      {{else}}
        {{t "dash"}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.proofPrintCorrector}}
    <td
      data-test-publication-table-row-proof-print-corrector
      class="auk-u-text-nowrap"
    >
      {{#if @publicationFlow.publicationSubcase.proofPrintCorrector}}
        <Auk::Avatar @icon="user" @size="small">
          <p>{{@publicationFlow.publicationSubcase.proofPrintCorrector}}</p>
        </Auk::Avatar>
      {{else}}
        {{t "dash"}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.publicationTargetDate}}
    <td
      data-test-publication-table-row-target-end-date
      class="auk-u-text-nowrap"
    >
      {{#if @publicationFlow.publicationSubcase.targetEndDate}}
        {{moment-format
          @publicationFlow.publicationSubcase.targetEndDate
          "DD-MM-YYYY"
        }}
        {{#if
          (and
            (not @publicationFlow.status.isFinal)
            @publicationFlow.publicationSubcase.isOverdue
          )
        }}
          <Auk::FormHelpText
            @text={{t "date-expired"}}
            @skin="warning"
            @icon="alert-triangle"
          />
        {{/if}}
      {{else}}
        {{t "dash"}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.publicationDate}}
    <td
      data-test-publication-table-row-publication-date
      class="auk-u-text-nowrap"
    >
      {{#if this.loadData.isRunning}}
        ...
      {{else}}
        {{#if this.publicationDate}}
          {{moment-format this.publicationDate "DD-MM-YYYY"}}
        {{else}}
          {{t "dash"}}
        {{/if}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.publicationDueDate}}
    <td
      data-test-publication-table-row-publication-due-date
      class="auk-u-text-nowrap"
    >
      {{#if @publicationFlow.publicationSubcase.dueDate}}
        <div class="{{if this.isPublicationOverdue 'auk-u-text-bold'}}">
          {{moment-format
            @publicationFlow.publicationSubcase.dueDate
            "DD-MM-YYYY"
          }}
        </div>
      {{else}}
        {{t "dash"}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.regulationType}}
    <td
      data-test-publication-table-row-regulation-type
      class="auk-u-text-nowrap"
    >
      {{#if @publicationFlow.regulationType.abbreviation}}
        {{@publicationFlow.regulationType.abbreviation}}
      {{else if @publicationFlow.regulationType}}
        {{@publicationFlow.regulationType.label}}
      {{else}}
        {{t "dash"}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.source}}
    <td data-test-publication-table-row-source class="auk-u-text-nowrap">
      {{#if this.loadData.isRunning}}
        ...
      {{else}}
        {{#if this.isViaCouncilOfMinisters}}
          {{t "via-cabinet"}}
        {{else}}
          {{t "not-via-cabinet"}}
        {{/if}}
      {{/if}}
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.lastEdited}}
    <td>
      {{moment-format @publicationFlow.modified "DD-MM-YYYY"}}<br />
      <span class="auk-u-text-size--small auk-u-text-muted">
        {{moment-format @publicationFlow.modified "HH:mm"}}
      </span>
    </td>
  {{/if}}
  {{#if @tableColumnDisplayOptions.status}}
    <td data-test-publication-table-row-status class="auk-u-text-nowrap">
      {{#if this.loadPublicationStatus.isRunning}}
        ...
      {{else}}
        <Auk::StatusPill
          @step={{this.publicationStatusPillStep}}
          @status={{this.publicationStatusPillKey}}>
          {{@publicationFlow.status.label}}
        </Auk::StatusPill>
      {{/if}}
    </td>
  {{/if}}
  <td>
    <Auk::Button
      @skin="borderless"
      @layout="icon-only"
      @icon="chevron-right"
      @route="publications.publication"
      @model={{@publicationFlow.id}}
      data-test-publication-table-row-go-to-publication
    />
  </td>
</tr>