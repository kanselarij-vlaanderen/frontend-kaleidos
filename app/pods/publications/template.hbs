{{#if shouldShowPublicationHeader}}
{{!-- TODO auk-panel-layout gebruiken, component ? --}}
  <div class="vlc-panel-layout__main-content">
    <WebComponents::AuNavbar class="vlc-publication-overview-navbar" @border="bottom" @skin="gray-100" @auto="true">
      <WebComponents::AuToolbar>
        <WebComponents::AuToolbar::Group @position="left">
          <WebComponents::AuToolbar::Item>
            <div class="auk-u-flex auk-u-flex--vertical auk-u-mt-2">
              <h4 class="auk-toolbar-complex__title">{{t "publications" }}</h4>
              <WebComponents::AuTabs @reversed="true">
                {{!--
                  <WebComponents::AuTab @route="publications.to-treat" data-test-publications-overview-to-treat-tab>
                    {{t "publications-to-in-progress"}}
                  </WebComponents::AuTab>
                --}}
                <WebComponents::AuTab @route="publications.in-progress"
                                      data-test-publications-overview-in-progress-tab>
                  {{t "publications-to-publish"}}
                </WebComponents::AuTab>
                <WebComponents::AuTab @route="publications.done" data-test-publications-overview-done-tab>
                  {{t "publications-published"}}
                </WebComponents::AuTab>
                <WebComponents::AuTab @route="publications.paused" data-test-publications-overview-paused-tab>
                  {{t "publications-paused"}}
                </WebComponents::AuTab>
                <WebComponents::AuTab @route="publications.withdrawn" data-test-publications-overview-withdrawn-tab>
                  {{t "publications-withdrawn"}}
                </WebComponents::AuTab>
              </WebComponents::AuTabs>
            </div>
          </WebComponents::AuToolbar::Item>
        </WebComponents::AuToolbar::Group>
        <WebComponents::AuToolbar::Group @position="right">
          <WebComponents::AuToolbar::Item>
            <WebComponents::AuDropdown>
              <WebComponents::AuInput @icon="search"
                                      class="auk-input--block"
                                      type="text"
                                      data-test-trigger-search-input
                                      id="defaultInput"
                                      @placeholder={{t "search-placeholder"}}
                                      @value={{this.searchText}}
                                      {{on "input" (perform this.debouncedSearchTask)}}
                                      @enter={{perform this.debouncedSearchTask}}
                                      @autocomplete="off"
              />
              {{#if showSearchResults}}
                <div class="autocomplete-results auk-search-results-list">
                  {{#each this.searchResults as |result|}}
                    {{#if result.publicationFlowId}}
                      <WebComponents::AuDropdown::Item
                              @class="auk-search-results-list__item">
                        <LinkTo
                                data-test-publication-search-result
                                @route="publications.publication.documents"
                                @model={{result.publicationFlowId}}
                        >
                          {{result.subcaseSubTitle}}
                          <br>
                          <span class="auk-u-muted auk-u-text-small">{{result.publicationFlowNumber}}</span>
                        </LinkTo>
                      </WebComponents::AuDropdown::Item>
                    {{else}}
                      <WebComponents::AuDropdown::Item
                              {{on "click" (fn this.startPublicationFromCaseId result.id)}}
                              @class="auk-search-results-list__item">
                        {{result.subcaseSubTitle}}
                        <br>
                        <span class="auk-u-muted auk-u-text-small">
                          {{t "publication-not-started-yet"}}
                        </span>
                      </WebComponents::AuDropdown::Item>
                    {{/if}}
               {{/each }}
                </div>
              {{/if}}
            </WebComponents::AuDropdown>
          </WebComponents::AuToolbar::Item>
          <WebComponents::AuToolbar::Item>
            <WebComponents::AuButton data-test-publication-header-button-new @icon="add" @skin="primary"
              {{on "click" (fn this.showNewPublicationModal)}}>
              {{t "publications-new"}}
            </WebComponents::AuButton>
          </WebComponents::AuToolbar::Item>
        </WebComponents::AuToolbar::Group>
      </WebComponents::AuToolbar>
    </WebComponents::AuNavbar>
    <div class="vlc-u-box-model-maximize-height vlc-scroll-wrapper">
      {{!-- <Navbar @size="large" @border="none">
          <WebComponents::AuToolbar>
            <WebComponents::AuToolbar::Group>
              <WebComponents::AuInput @icon="search" @block="true" placeholder="Zoeken..."></WebComponents::AuInput>
            </WebComponents::AuToolbar::Group>
            <WebComponents::AuToolbar::Group @position="right">
              <WebComponents::AuToolbar::Item>
                <WebComponents::AuButton @icon="filter">{{t "filter"}}</WebComponents::AuButton>
              </WebComponents::AuToolbar::Item>
            </WebComponents::AuToolbar::Group>
          </WebComponents::AuToolbar>
        </Navbar> --}}
      {{#if isShowingPublicationModal}}
        <WebComponents::AuModal data-test-au-modal-publication-new>
          <WebComponents::AuModal::Header
                  @title={{t "publications-new-not-minister"}}
                  @closeModal={{this.closePublicationModal}}
          />
          <WebComponents::AuModal::Body>
            {{#if hasError}}
              <WebComponents::AuAlert data-test-auk-alert-error
                                      @title={{t "modal-error-alert-title"}}
                                      @skin="error"
                                      @message={{t "modal-error-alert-message"}}
                                      @icon="alert-triangle"/>
            {{else}}
              <WebComponents::AuAlert data-test-auk-alert-info
                                      @message={{t "publications-new-warning-message"}}
                                      @icon="circle-info"/>
            {{/if}}
            <div class="auk-form-group-layout auk-form-group-layout--standard">
              <div class='auk-form-group {{getClassForGroupNumber}}'>
                <WebComponents::AuLabel for="publicationNumberInput" @isRequired={{true}}>
                  {{t "publications-number"}}
                </WebComponents::AuLabel>
                <WebComponents::AuInput type="text" id="publicationNumberInput" class="auk-input--max-width"
                                        @block="true"
                                        @value={{mut publication.number}}
                                        data-test-create-publication-modal-number-input
                                        {{on "change" (await isPublicationNumberAlreadyTaken)}}
                />
                {{#if (and this.getClassForGroupNumber (not this.numberIsAlreadyUsed))}}
                  <WebComponents::AuLabelError>
                    {{t "input-error-message"}}
                  </WebComponents::AuLabelError>
                {{/if}}
                {{#if this.numberIsAlreadyUsed}}
                  <WebComponents::AuLabelError>
                    {{t "publication-number-already-taken"}}
                  </WebComponents::AuLabelError>
                {{/if}}
              </div>
              <div class='auk-form-group {{getClassForGroupShortTitle}}'>
                <WebComponents::AuLabel for="shortTitleInput"
                                        @isRequired={{true}}>
                  {{t "name-subcase"}}
                </WebComponents::AuLabel>
                <WebComponents::AuTextarea id="shortTitleInput"
                                           @rows="2"
                                           @value={{mut publication.shortTitle}}
                                           data-test-create-publication-modal-short-title-textarea/>
                {{#if getClassForGroupShortTitle}}
                  <WebComponents::AuLabelError>{{t "input-error-message"}}</WebComponents::AuLabelError>
                {{/if}}
              </div>
              <div class="auk-form-group">
                <WebComponents::AuLabel for="longTitleInput">{{t "title-subcase"}}</WebComponents::AuLabel>
                <WebComponents::AuTextarea id="longTitleInput"
                                           @rows="4"
                                           @value={{mut publication.longTitle}}
                                           data-test-create-publication-modal-long-title-textarea/>
              </div>
            </div>
          </WebComponents::AuModal::Body>
          {{!-- TODO, use the template, yield the buttons in the right toolbar--}}
          <WebComponents::AuModal::Footer @custom={{true}}>
            <WebComponents::AuToolbar>
              <WebComponents::AuToolbar::Group @position="left">
                <WebComponents::AuToolbar::Item>
                  <WebComponents::AuButton @skin="borderless"
                                          {{on "click" this.closePublicationModal}}
                                           data-test-publication-button-cancel>
                    {{t "cancel"}}
                  </WebComponents::AuButton>
                </WebComponents::AuToolbar::Item>
              </WebComponents::AuToolbar::Group>
              <WebComponents::AuToolbar::Group @position="right">
                <WebComponents::AuToolbar::Item>
                  {{#if (not this.isCreatingPublication)}}
                    <WebComponents::AuButton @skin="primary" data-test-publication-button-create-new
                      {{on "click" this.createNewPublication}}>
                      {{t "publications-new-button-text"}}
                    </WebComponents::AuButton>
                  {{else}}
                    <Utils::SimpleSpinner></Utils::SimpleSpinner>
                  {{/if}}
                </WebComponents::AuToolbar::Item>
              </WebComponents::AuToolbar::Group>
            </WebComponents::AuToolbar>
          </WebComponents::AuModal::Footer>
        </WebComponents::AuModal>
      {{/if}}
      {{outlet}}
    </div>
  </div>
{{else}}
  {{outlet}}
{{/if}}

{{!-- LOADER --}}

{{#if this.showLoader}}
  <WebComponents::AuLoadingOverlay/>
{{/if}}