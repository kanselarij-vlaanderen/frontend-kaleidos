<LinkTo
  class={{classNameBindings}}
  @route={{this.router.currentRouteName}}
  @model={{@agendaitem.id}}
>
  {{!-- Long term, I think we rather want this component to trigger an action when the "active" status toggles.
    With that, a higher-level component can decide if it wants to scroll this element in to view. Currently, because the active status
    is set right from the beginning and the component is rendered only once, scrolling on "did-insert" works just fine --}}
  <div class="vl-u-display-flex" {{did-insert this.conditionallyScrollIntoView}} {{in-viewport onEnter=this.onEnter onExit=this.onExit}}>
    <span class="vlc-agenda-detail-sidebar-sub-item__numbering">
      {{#if @agendaitem.number}}
        {{@agendaitem.number}}.
      {{else}}
        {{add index 1}}.
      {{/if}}
    </span>
    <div class="vlc-agenda-detail-sidebar__text-container">
      <h4 class="vlc-agenda-detail-sidebar__subject">
        <pre class="vl-u-text-color-agenda-list">
          {{#if @agendaitem.shortTitle}}
            {{@agendaitem.shortTitle}}
          {{else}}
            {{@agendaitem.title}} {{!-- Fallback for legacy data that doesn't have a short title --}}
          {{/if}}
        </pre>
      </h4>
      {{#if (not @agendaitem.aboutToDelete)}}
        {{#if (not selectedAgendaitem)}}
          {{#if (not @agendaitem.isApproval)}}
            {{#if @agendaitem.shortTitle}} {{!-- Avoid rendering the same thing twice if no "shortTitle" exists --}}
              <pre class="vl-u-text">
                {{@agendaitem.title}}
              </pre>
            {{/if}}
          {{/if}}
        {{/if}}
        <div>

          <div class="vl-u-display-flex vlc-u-flex-space-between">
            <div class="vl-u-display-flex vlc-u-display-flex-align-items-flex-end vlc-agenda-detail-sidebar-item__icon">
              {{#if this.renderDetails}}
                {{#if (await @agendaitem.checkAdded)}}
                  <span class="added-tag vlc-agenda-meta__recently-added">
                    <i class="ki-calendar-plus"></i>
                    {{#attach-tooltip
                      arrow="true"
                      animation="shift"
                      placement="top"
                      class="ember-attacher-tooltip"
                    }}
                      <p>
                        {{t "added-agendaitem-text"}}
                      </p>
                    {{/attach-tooltip}}
                  </span>
                {{/if}}
                {{#if newsletterInfo}}
                  {{#if (not newsletterInfo.inNewsletter)}}
                    <span class="added-tag vlc-agenda-meta__recently-added">
                      <i class="ki-hide vlc-agenda-detail-sidebar-item__icon--margin-right vlc-u-opacity-50"></i>
                      {{#attach-tooltip
                        arrow="true"
                        animation="shift"
                        placement="top"
                        class="ember-attacher-tooltip"
                      }}
                        <p>
                          {{t "not-visible-in-newsletter"}}
                        </p>
                      {{/attach-tooltip}}
                    </span>
                  {{/if}}
                {{/if}}

                {{#if (await subcase.confidential)}}
                  <i
                  class="vl-icon ki-lock-closed vlc-u-opacity-50"
                  data-test-icon-agenda-confidentiality-locked
                  ></i>
                {{/if}}
              {{/if}}
            </div>
            <div class="vlc-agenda-detail-sidebar__formally-ok-label vlc-u-display-flex-align-items-flex-end">
              {{#if
                (and currentSessionService.isEditor (await currentAgenda.isDesignAgenda))
              }}
                <i class="{{@agendaitem.formallyOkToShow.iconClassNames}} {{@agendaitem.formallyOkToShow.classNames}}" />
                <p class="{{@agendaitem.formallyOkToShow.classNames}}">
                  {{@agendaitem.formallyOkToShow.label}}
                </p>
              {{/if}}
            </div>
          </div>
        </div>
      {{/if}}
    </div>
  </div>
</LinkTo>