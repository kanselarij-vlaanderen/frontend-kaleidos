<div class="auk-u-mb-2">
  <div class="auk-u-flex auk-u-flex--align-baseline">
    <h4 class="auk-h3">
      {{t "subcases"}}
    </h4>
  </div>
</div>
{{#if (is-pending @subcases)}}
  {{web-components/vl-loader text=(t "all-subcases-loading-text")}}
{{else if @subcases.length}}
  {{#each @subcases as |subcase|}}
    {{#subcases/subcase-item subcase=(await subcase)}}
      <hr class="vlc-hr"/>
      <div class="auk-u-mb-4">
        <p>
          {{subcase.title}}
        </p>
      </div>
      {{#if (gt (await subcase.pieces.length) 1)}}
        <div class="js-vl-accordion">
          <button class="vl-toggle auk-button-link"
                  data-vl-accordion-toggle=""
                  data-vl-accordion-dressed="true"
                  aria-expanded="false"
                  type="button"
            {{action "toggleIsShowingDocuments" subcase}}
          >
            {{#if subcase.isShowingDocuments}}
              <i class="vl-link__icon vl-link__icon--before vl-toggle__icon ki-chevron-down"
                 aria-hidden="true"
              ></i>
            {{else}}
              <i class="vl-link__icon vl-link__icon--before vl-toggle__icon ki-chevron-right"
                 aria-hidden="true"
              ></i>
            {{/if}}
            {{t "documents"}}
          </button>
        </div>
        {{#if subcase.isShowingDocuments}}
          <div class="vl-accordion__panel">
            <div class="auk-u-mt-4">
              {{utils/pieces-list-for-item agendaitemOrSubcase=subcase isClickable=true}}
            </div>
          </div>
        {{/if}}
      {{/if}}
    {{/subcases/subcase-item}}
  {{/each}}
{{else}}
  <div class="auk-u-mt-2">
    {{web-components/vl-alert message=(t "no-subcases-yet")}}
  </div>
{{/if}}