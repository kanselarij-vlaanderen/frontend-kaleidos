{{ page-title
  (t "search")
}}
<div class="vlc-u-box-model-maximize-height auk-scroll-wrapper">
  <div class="auk-navbar auk-navbar--bordered-bottom auk-navbar--gray-100">
    <div class="auk-toolbar-complex auk-toolbar-complex--auto">
      <div class="auk-toolbar-complex__left">
        <div class="auk-toolbar-complex__item">
          <h2 class="auk-toolbar__title">
            {{capitalize (t "search")}}
          </h2>
        </div>
      </div>
    </div>
  </div>

  <div class="auk-scroll-wrapper__body">
    <div class="auk-u-m-8 auk-u-mt-4">
      <div class="auk-o-grid auk-o-flex--align-end auk-u-mb-2">
        <div class="auk-o-grid-col-4">
          <div class="auk-form-group">
            <div class="auk-o-flex auk-o-flex--align-baseline">
              <WebComponents::AuLabel for="dossierId" class="auk-u-mr">
                {{capitalize (t "keyword")}}
              </WebComponents::AuLabel>
              <span>
                <i
                  class="ki-circle-info auk-u-cursor-pointer auk-icon--muted"
                  aria-hidden="true"
                  {{on "click" this.openPopover}}
                >
                </i>
                <AttachPopover
                  @class="auk-popover"
                  @showOn="click"
                  @placement="right"
                  @hideOn="clickout"
                  @isShown={{this.popoverShown}}
                  @renderInPlace={{true}}
                >
                  <Utils::SearchLegend @userClickedClose={{this.closePopover}}/>
                </AttachPopover>
              </span>
            </div>
            <Input
              data-test-searchfield=""
              class="auk-input auk-input--block"
              type="text"
              id="dossierId"
              @placeholder={{t "search-placeholder"}}
              @value={{this.searchTextBuffer}}
              @enter={{fn this.search}}
            />
          </div>
        </div>
        <div class="auk-o-grid-col-2">
          <div class="auk-form-group auk-u-position-relative">
            <WebComponents::AuLabel>{{t "from"}}</WebComponents::AuLabel>
            <WebComponents::VlDatepicker
              @selectedDate={{array this.dateFromBuffer}}
              @dateChanged={{fn (mut this.dateFromBuffer)}}
            />
            {{#if this.dateFromBuffer}}
              <button
                data-test-searchbutton
                type="button"
                class="auk-button auk-button--muted-borderless auk-button--icon auk-button-in-input"
                {{on "click" (fn (mut this.dateFromBuffer) null)}}
              >
                <span class="auk-button__content">
                  <div class="auk-icon auk-icon--default">
                    <i class="ki ki-close" aria-hidden="true"></i>
                  </div>
                </span>
              </button>
            {{/if}}
          </div>
        </div>
        <div class="auk-o-grid-col-2">
          <div class="auk-form-group auk-u-position-relative">
            <WebComponents::AuLabel>{{t "until-inclusive"}}</WebComponents::AuLabel>
            <WebComponents::VlDatepicker
              @selectedDate={{array this.dateToBuffer}}
              @dateChanged={{fn (mut this.dateToBuffer)}}
            />
            {{#if this.dateToBuffer}}
              <button
                type="button"
                class="auk-button auk-button--muted-borderless auk-button--icon auk-button-in-input"
                {{on "click" (fn (mut this.dateToBuffer) null)}}
              >
                <span class="auk-button__content">
                  <div class="auk-icon auk-icon--default">
                    <i class="ki ki-close" aria-hidden="true"></i>
                  </div>
                </span>
              </button>
            {{/if}}
          </div>
        </div>
        <div class="auk-o-grid-col-2">
          <div class="auk-form-group">
            <WebComponents::AuLabel for="ministerName">
              {{t "minister"}}
            </WebComponents::AuLabel>
            <Input
              type="text"
              class="auk-input auk-input--block"
              id="ministerName"
              @value={{this.mandateesBuffer}}
              @enter={{fn this.search}}
            />
          </div>
        </div>
        <div class="auk-o-grid-col-1">
          <WebComponents::AuButton
            @skin="primary"
            @icon="search"
            data-test-trigger-search
            type="button"
            {{on "click" this.search}}
          >
            {{t "search"}}
          </WebComponents::AuButton>
        </div>
      </div>

      <div class="auk-navbar auk-navbar--bordered-bottom auk-navbar--white auk-u-p-0 auk-u-mb-6">
        <div class="auk-toolbar-complex">
          <div class="auk-toolbar-complex__left">
            <div class="auk-toolbar-complex__item">
              <ul class="auk-tabs">
                {{!-- Page-number reset when clicking a search type. It is assumed that users don't want
                      to go back and forth between search results for the different types while keeping the
                      page-number. --}}
                <li class="auk-tabs__tab">
                  <LinkTo
                    @route="search.agenda-items"
                    @current-when="search.agenda-items"
                    @activeClass="active"
                    @query={{hash page=0}}
                  >
                    <span class="auk-tabs__tab-inner">{{t "agendaitems"}}</span>
                  </LinkTo>
                </li>
                <li class="auk-tabs__tab">
                  <LinkTo
                    @route="search.cases"
                    @current-when="search.cases"
                    @activeClass="active"
                    @query={{hash page=0}}
                  >
                    <span class="auk-tabs__tab-inner">{{t "cases"}}</span>
                  </LinkTo>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      {{outlet}}
    </div>
  </div>
</div>
